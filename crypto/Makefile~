target := libhblk_crypto.a
objs := ec_create ec_from_pub ec_load ec_save ec_sign ec_to_pub ec_verify sha256
cc := gcc
flags := -Wall -Wextra -Werror -pedantic
all: $(target)
deps := $(patsubst %.c,%.o,$(objs))
-include $(deps)
DEPFLAGS = -MMD -MF $(@:.c=.o)
libhblk_crypto.a: $(objs)
	$(cc) $(flags) -o $@ $^ -lssl -lcrypto
%.o: %.c
	$(cc) $(flags) -c $< $(DEPFLAGS) -lssl -lcrypto
clean:
	rm -f $(targets) $(objs) $(deps)
